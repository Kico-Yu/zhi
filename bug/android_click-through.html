<!doctype html>
<html>
<head>
<title>Test Tap</title>
<meta name="viewport" content="width=device-width">
<style>
html {
	font-size: 2em;
}
#layer {
	position: fixed;
	left: 1em;
	top: 1em;
	right: 1em;
	bottom: 1em;
	background: rgba(0, 0, 0, 0.5);
}
#ground {
	margin: 1em;
	padding: 1em;
	border: medium solid;
}
a {
	display: block;
}
#out {
	overflow: auto;
}
</style>
<script src="../src/log.js"></script>
<script src="../src/index.js"></script>
</head>
<body>


<article id="layer">layer</article>

<article id="ground">
	<a href="#" onclick="alert(navigator.userAgent)">test</a>
</article>

<article>
	<p>1<p>2<p>3<p>4<p>5<p>6<p>7<p>8<p>9<p>0
</article>

<script>
void function(){
	
	var layer = document.getElementById('layer')
	var ground = document.getElementById('ground')

	window.addEventListener('touchend', function(evt){
		//layer.style.visibility = 'hidden'
		//layer.style.opacity = '0'
		layer.style.pointerEvents = 'none'
		/*setTimeout(function(){
			window.scrollBy(0, 20)
		}, 299)*/
		evt.preventDefault()
		evt.stopPropagation()
	}, true)

	logEvents(layer)
	logEvents(ground)

	function logEvents(e) {
		e.addEventListener('touchstart', doLog)
		e.addEventListener('touchend', doLog)
		e.addEventListener('touchmove', doLog)
		e.addEventListener('touchcancel', doLog)
		e.addEventListener('mousedown', doLog)
		e.addEventListener('mouseup', doLog)
		e.addEventListener('mousemove', doLog)
		e.addEventListener('click', doLog)		
		e.addEventListener('DOMActivate', doLog)		
	}

	function doLog(evt) {
		$log(evt.type, evt.isTrusted, evt.target.nodeName, evt.currentTarget.nodeName)
	}


}()
</script>

</body>
</html>